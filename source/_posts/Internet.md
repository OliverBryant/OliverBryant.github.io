---
title: Internet
categories:
  - 考研
tags:
  - 专业课
abbrlink: 62044
date: 2021-04-30 10:09:45
updated: 2021-04-30 10:09:45
permalink:
---

# 第一章：计算机网络体系结构

## 一、计算机网络概述

### 一、计算机网络的概念

1. 定义：计算机网络是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。
2. 简要定义：计算机网络是一些互联的、自治的计算机系统的集合。
3. 三网：电信网络、有线电视网络和计算机网络。

### 二、计算机网络的组成

1. 从组成部分上看：
    - 硬件：主机（端系统）、通信链路（如双绞线、光纤）、交换设备（如路由器、交换机）、通信处理机（如网卡）
    - 软件：各种实现资源共享的软件和方便用户使用的各种工具软件（如网络操作系统、邮件收发程序、FTP程序、聊天程序等）
    - 协议：计算机网络的核心，规定了网络传输数据时所遵循的规范。
2. 从工作方式上看：
    - 边缘部分：由所有连接到因特网上、供用户直接使用的主机组成，用来进行通信（如传输数据、音频或视频）和资源共享。
        - C/S方式（Client/Server）：服务与被服务关系的通信，客户主体是进程
        - B/S方式（Browser/Server）：客户主体是浏览器
        - P2P方式（peer-to-peer）：对等连接，每个主机既可以充当服务提供者，也可充当客户。
    - 核心部分：由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。
3. 从功能组成上看：
    - 通信子网：由各种传输介质、通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力，实现联网计算机之间的数据通信。（OSI下三层）
    - 资源子网：是实现资源共享的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务。（OSI上三层）

### 三、计算机网络的功能

1. 数据通信：实现联网计算机之间各种信息的传输，并将分散在不同地理位置的计算机联系起来，进行统一的调配、控制和管理。
2. 资源共享：同一个计算机上的其他计算机可使用某台计算机的计算机资源的行为，可共享硬件、软件和数据。
3. 分布式处理：多台计算机各自承担同一工作任务的不同部分。
4. 提高可靠性：计算机网络中的各台计算机可以通过网络互为替代机。
5. 负载均衡：将工作任务均衡地分配给计算机网络中的各台计算机。

### 四、计算机网络发展的三个阶段

1. 从单个网络ARPANET向互联网发展的过程：ARPAnet->internet->Internet
2. 建成三级结构的因特网：
    - 主干网
    - 地区网
    - 校园网、企业网
3. 形成多层次ISP结构的因特网：
    - ISP：因特网服务提供者（因特网服务提供商）：中国电信、中国移动、中国联通等
    - ISP的划分：
        - 主干ISP
        - 地区ISP
        - 本地ISP
    - IXP：因特网交换点：将地区ISP之间直接相连。

### 五、计算机网络的分类

1. 按分布范围分：

    - 广域网（WAN）：
        - 覆盖范围几十千米到几千千米。
        - 采用技术：交换技术

    - 城域网（MAN）：
        - 覆盖范围几千米到几十千米。
        - 采用技术：以太网技术

    - 无线局域网（WLAN）：
        - 覆盖范围几十米到几千米。
        - 采用技术：广播技术

    - 个域网（PAN）：
        - 覆盖范围：十米左右
        - 通过短距离的无线电，将计算机各部件连接起来。
        - 典型的例子：蓝牙技术、ZigBee技术、NFC技术。

2. 按使用者分：

    - 共用网（Public Network）：指电信公司出资建造的大型网络。
    - 专用网（Private Network）：指某个部门为满足本单位特殊业务的需要而建造的网络。

3. 按交换技术分：

    - 电路交换网络：
        - 定义：在源结点和目的结点之间建立一条专用的通路用于传送数据，包括建立连接、传输数据和断开连接三个阶段。
        - 特点：整个报文的比特流连续地从源点直达终点。
        - 优点：数据直接传送，时延小。
        - 缺点：线路利用率低，不能充分利用线路容量，不便于进行差错控制。

    - 报文交换网络：
        - 定义：用户数据加上源地址、目的地址、校验码等辅助信息，然后封装成报文。整个报文传送到相邻结点，全部存储后，再转发给下一个结点，重复直到到达目的结点。
        - 特点：整个报文先传送到相邻结点，全部存储后查找转发表，转发到下一结点。
        - 优点：可以较为充分地利用线路容量，可以实现不同链路之间不同数据传输速率的转换，可以实现格式转换，可以实现一对多、多对一的访问，可以实现差错控制
        - 缺点：增大了资源开销，增加了换冲时延，需要额外的控制机制来保证多个报文的顺序不乱序，缓冲区难以管理。
    - 分组交换网络：
        - 定义：将数据分成较短的固定长度的数据块，在每个数据块中加上目的地址、源地址等辅助信息组成分组（包），以存储——转发方式传输。
        - 特点：单个分组传送到相邻结点，存储后查找转发表，转发到下一结点。
        - 优点：可以较为充分地利用线路容量，可以实现不同链路之间不同数据传输速率的转换，可以实现格式转换，可以实现一对多、多对一的访问，可以实现差错控制，缓冲易于管理；包的平均时延更小，网络占用的平均缓冲区更少；更易于标准化；更适合应用。

4. 按拓扑结构分：

    ![拓扑结构分类图](https://oliver-picture.oss-cn-beijing.aliyuncs.com/img/3812b31bb051f8195e8f191bdeb44aed2e73e73d.png)

    - 总线型网络：
        - 定义：用单根数据线把计算机连接起来
        - 优点：建网容易、增/减结点方便、节省线路
        - 缺点：重负载时通信效率不高、总线任意一处对故障敏感
    - 星型网络：
        - 定义：每个终端或计算机都以单独的线路与中央设备相连。
        - 优点：便于集中控制和管理
        - 缺点：成本高、中心设备对故障敏感
    - 环形网络：
        - 定义：所有计算机接口设备连接成一个环
        - 特点：环中信号是单向传输的
    - 网状网络：
        - 定义：每个结点至少有两条路径与其他结点相连，多用在广域网中
        - 优点：可靠性高
        - 缺点：控制复杂、线路成本高

5. 按传输技术分：

    - 广播式网络：所有联网计算机都共享一个公共通信信道。
    - 点对点网络：每条物理线路连接一对计算机。

### 六、计算机网络的性能指标

1. 速率：

    - 定义：连接在计算机网络上的主机在数字信道上传送数据位数的速率。

    - 单位：
        $$
        1Tb/s=10^3Gb/s=10^6Mb/s=10^9kb/s=10^{12}b/s
        $$

2. 带宽：

    - 通信定义：某个信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹（Hz）
    - 网络定义：表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。
    - 单位：同上
    - 实质：主机发送数据的最高速率

3. 吞吐量：

    - 定义：表示在单位时间内通过某个网络（或信道、接口）的数据量。
    - 单位：同上
    - 注：吞吐量受网络的带宽或网络的额定速率的限制  
    
4. 时延：

    - 定义：指数据（报文/分组/比特流）从网络（或链路）的一端传送到另一端所需的时间。也叫延迟或迟延。

    - 单位：s

    - 分类：

        - 发送时延（传输时延）：

            - 定义：结点将分组的所有比特推向链路所需要的时间。

            - 公式：
                $$
                发送时延=\frac{分组长度}{信道带宽}
                $$

        - 传播时延：

            - 定义：电磁波在信道中传播一定的举例花费的时间。

            - 公式：
                $$
                传播时延=\frac{信道长度}{电磁波在信道上的传播速率}
                $$

        - 排队时延：等待输出/输入链路可用的时间。

        - 处理时延：数据在交换结点为存储转发而进行的一些必要的处理所花费的时间。

    - 注：

        - 一般情况下，排队时延和处理时延可以忽略不计。
        - 高速链路，实际是提高数据发送速率，所以仅会减小发送时延；并不改变电磁波传播速率，故传播时延没有变化。

5. 时延带宽积：

    - 定义：指发送段发送的第一个比特即将到达终点时，发送端已经发出了多少个比特，又称以比特为单位的链路长度。

    - 单位：bit

    - 公式：
        $$
        时延带宽积=传播时延\times信道带宽
        $$

    - 实质：某段链路的比特容量

6. 往返时延RTT：

    - 定义：从发送方发送数据开始<font color="orange">（第一个bit到信道上）</font>，到发送方收到接受方的确认<font color="orange">（发送方收到对于第一个bit的确认信息）</font>（接受方收到数据后立即发送确认），总共经历的时延。
    - RTT越大，在收到确认前，可以发送的数据越多。
    - 包括：
        - 往返传播时延：两倍的传播时延
        - 末端处理时间

7. 利用率：

    - 分类：

        - 信道利用率：

            - 定义：指出某一信道有百分之多少的时间是有数据通过的。

            - 公式：
                $$
                信道利用率=\frac{有数据通过的时间}{（有+无）数据通过的时间}
                $$

        - 网络利用率：信道利用率加权求平均值。

## 二、计算机网络体系结构与参考模型

### 一、计算机网络分层结构

1. 名词解析：

    - 实体：任何可发送或接受信息的硬件或软件进程。同一层的实体称为对等实体。

    - 协议：规则的集合。

    - 网络协议：

        - 定义：为进行网络中的数据交换而建立的规则、标准或约定。
        - 特点：水平的，只有对等实体（同一层）之间才有协议
        - 构成：
            - 语法：规定传输数据的格式
            - 语义：规定所要完成的功能
                - 发出何种控制信息
                - 完成何种动作
                - 作出何种应答
            - 同步：规定执行各种操作的条件、时序关系等，即时间实现顺序的详细说明。
        - 包含：
            - 线路管理
            - 差错控制
            - 数据转换

    - 接口（服务访问点SAP）：

        - 定义：同一结点内相邻两层间交换信息的连接点，是一个系统内部的规定。
        - 注：服务是通过SAP提供给上层使用的。第n层的SAP就是第n+1层可以访问第n层服务的地方。

    - 服务：

        - 定义：指下层为紧邻的上层提供的功能调用，它是垂直的。
        - 注：对等实体在协议的控制下，使得本层能为上层提供服务，但要实现本层协议还需要使用下一层提供的服务

    - 原语：

        - 定义：上层使用下层提供的服务时与下层交换的命令。
        - 分类：
            - 请求：由服务用户发往服务提供者，请求完成某项工作
            - 指示：由服务提供者发往服务用户，指示用户做某件事情
            - 响应：由服务用户发往服务提供者，作为对指示的响应
            - 证实：由服务提供者发往服务用户，作为对请求的证实。

    - SDU服务数据单元：为完成用户所要求的功能而应传送的数据。

    - PCI协议控制信息：控制协议操作的信息

    - PDU协议数据单元：对等层次之间传送的数据单位

        <img src="https://oliver-picture.oss-cn-beijing.aliyuncs.com/img/QQ%E6%88%AA%E5%9B%BE20210515122628.png" style="zoom:50%;" />

2. 分层的基本原则：

    - 各层之间相互<font color="red">独立</font>，每层只实现一种相对独立的功能。
    - 每层之间<font color="red">界面自然清晰</font>，易于理解，相互交流尽可能少。
    - 结构上可分割开。每层都采用<font color="red">最合适的技术</font>来实现。
    - 保持<font color="red">下层</font>对<font color="red">上层</font>的独立性，<font color="red">上层单向使用下层提供的服务</font>。
    - 整个分层结构应该能促进标准化工作。

3. 注：

    - 网络体系结构是从<font color="red">功能</font>上描述计算机网络结构。
    - 计算机网络体系结构建成网络体系结构是<font color="red">分层结构</font>。
    - 每层遵循某个/些<font color="red">网络协议</font>以完成本层功能。
    - 计算机网络体系结构是计算机网络<font color="red">各层及其协议</font>的集合
    - 第n层在向n+1层提供服务时，此服务不仅包含第n层本身的服务，还包含由下层服务提供的功能。
    - 仅仅在<font color="red">相邻层间</font>有接口，且所提供服务的具题实现细节对上层完全屏蔽
    - 体系结构是<font color="red">抽象</font>的，而实现是指能运行的一些软件和硬件。

### 二、OSI参考模型

1. 国际标准化组织（ISO）于1984年提出开放系统互连（OSI）参考模型，是一种法定标准。<font color="orange">（理论成功，市场失败）</font>
2. 层次：物链网输会示用：<img src="https://oliver-picture.oss-cn-beijing.aliyuncs.com/img/OSI.png" style="zoom: 50%;" />
3. 应用层：
    - 定义：所有能和用户交互产生网络流量的程序，是用户与网络的界面
    - 典型服务：
        - 文件传输（FTP）
        - 电子邮件（SMTP）
        - 万维网（HTTP）
4. 表示层：
    - 定义：用于处理在两个通信系统中交换信息的表示方式（语法和语义）
    - 功能：
        - 数据格式变换：翻译
        - 数据加密解密
        - 数据压缩恢复
    - 典型协议：
        - JPEG
        - ASCII
5. 会话层：
    - 定义：向表示层实体/用户进程提供建立连接并在连接上有序地传输数据，也称为建立同步（SYN）。
    - 功能：
        - 建立、管理、终止会话
        - 使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步。
    - 典型协议：
        - ADSP
        - ASP
6. 传输层：
    - 定义：负责主机中两个进程的通信，即端到端的通信。
    - 传输单位：报文段或用户数据报
    - 功能：
        - 可靠传输、不可靠传输
        - 差错控制
        - 流量控制
        - 复用分用：
            - 复用：多个应用层进程可同时使用下面运输层的服务
            - 分用：运输层把收到的信息分别交付给上面应用层中相应的进程
    - 典型协议：
        - TCP
        - UDP
7. 网络层：
    - 主要任务：把分组从源端传送到目的端，为分组交换网上的不同主机提供通信服务。
    - 传输单位：数据报（分组是数据报切割后）
    - 功能：
        - 路由选择：寻找最佳路径
        - 流量控制
        - 差错控制
        - 拥塞控制：若所有结点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞状态。
    - 主要协议：
        - IP
        - IPX
        - ICMP
        - IGMP
        - ARP
        - RARP
        - OSPF
8. 数据链路层：
    - 主要任务：把网络层传下来的数据报组装成帧。
    - 传输单位：帧
    - 功能：
        - 成帧：定义帧的开始和结束
        - 差错控制
        - 流量控制
        - 访问（接入）控制：控制对信道的访问
    - 主要协议：
        - SDLC
        - HDLC
        - PPP
        - STP
9. 物理层：
    - 主要任务：在物理媒体上实现比特流的透明传输（指不管所传数据是什么样的比特组合，都应当能够在链路上传送）
    - 传输单位：比特
    - 功能：
        - 定义接口特性
        - 定义传输模式：
            - 单工
            - 半双工
            - 双工
        - 定义传输速率
        - 比特同步
        - 比特编码
    - 主要协议：
        - Rj45
        - 802.3

### 三、TCP/IP模型

1. TCP/IP模型：<img src="https://oliver-picture.oss-cn-beijing.aliyuncs.com/img/TCPIP%E6%A8%A1%E5%9E%8B.png" style="zoom:50%;" />

2. TCP/IP协议栈：<img src="https://oliver-picture.oss-cn-beijing.aliyuncs.com/img/TCPIP%E5%8D%8F%E8%AE%AE%E6%A0%88.png" style="zoom:50%;" />

3. TCP/IP模型与OSI模型的比较

    - 相同点：

        - 都分层
        - 基于独立的协议栈的概念
        - 可以实现异构网络的互联

    - 不同点：

        - OSI定义三点：服务、协议、接口

        - OSI先出现，参考模型先于协议发明，不偏向特定协议

        - TCP/IP设计之初就考虑到异构网互联问题，将IP作为重要层次

        - |        |       OSI       |     TCP/IP      |
            | :----: | :-------------: | :-------------: |
            | 网络层 | 无连接+面向连接 |     无连接      |
            | 传输层 |    面向连接     | 无连接+面向连接 |

            - 面向连接：
                - 建立连接：发出一个建立连接的请求。
                - 数据传输
                - 释放连接
            - 无连接：直接进行数据传输

